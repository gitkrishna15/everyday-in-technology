Topic: Consensus Algorithms (Raft vs Paxos)

1. What is Consensus? Why does it exist? What breaks if we don’t understand it?
What consensus means
Consensus is the process by which multiple distributed nodes agree on a single value or decision, even in the presence of failures.
That value could be:
	•	Who is the leader
	•	What the next log entry is
	•	Whether a transaction is committed
	•	What configuration is valid
In simple terms:
Consensus ensures all nodes agree on “what happened” and “in what order”.

Why consensus exists
Distributed systems face unavoidable problems:
	•	Nodes fail
	•	Messages are delayed or duplicated
	•	Networks partition
	•	Clocks are not synchronized
Without consensus:
	•	Nodes disagree on system state
	•	Data diverges
	•	Multiple leaders exist
	•	Writes conflict
	•	Systems become unrecoverable
Consensus exists to enforce order in chaos.

What breaks if we don’t understand consensus
If engineers misunderstand consensus:
	•	Split-brain occurs
	•	Data corruption happens
	•	Writes are lost
	•	Recovery becomes impossible
	•	Systems behave inconsistently under load
Most distributed database failures are consensus failures, not hardware failures.

2. What Consensus Actually Solves
Consensus guarantees:
	1	Agreement All healthy nodes agree on the same value.
	2	Validity Only proposed values can be chosen.
	3	Termination A decision is eventually made.
	4	Fault Tolerance System works even when nodes fail.

3. Why Consensus Is Hard
Because of:
	•	Network delays
	•	Partial failures
	•	Message loss
	•	Unpredictable timing
	•	CAP theorem constraints
There is no deterministic solution in asynchronous systems without tradeoffs.
This is why consensus algorithms are complex.

4. Paxos – The Theoretical Foundation
What Paxos Is
Paxos is a consensus algorithm designed by Leslie Lamport.
It is:
	•	Mathematically correct
	•	Proven safe
	•	Extremely difficult to understand
	•	Hard to implement correctly
Most modern systems are based on Paxos, not implemented directly.

Paxos Core Idea (Simplified)
There are three roles:
	•	Proposer – proposes a value
	•	Acceptor – agrees or rejects
	•	Learner – learns the result
Process:
	1	Proposer asks acceptors if they will accept a proposal
	2	Acceptors respond with promise
	3	Proposer sends value
	4	Acceptors accept it
	5	Learners learn the chosen value

Paxos Properties
	•	Strong consistency
	•	Tolerates failures
	•	No single point of failure
	•	Requires majority quorum

Why Paxos Is Rarely Used Directly
	•	Extremely complex
	•	Hard to debug
	•	Hard to reason about
	•	Difficult to implement correctly
	•	Very difficult to explain to engineers
Most teams avoid raw Paxos.

5. Raft – Consensus Made Understandable
Why Raft Exists
Raft was created because:
“Paxos is too hard to understand and implement correctly.”
Raft provides:
	•	Same guarantees as Paxos
	•	Much simpler design
	•	Easier debugging
	•	Clear leader model
Today, Raft is the industry standard.

Core Concepts in Raft
Raft breaks consensus into three simple problems:
	1	Leader Election
	2	Log Replication
	3	Safety

Raft Roles
	•	Leader – handles all writes
	•	Followers – replicate data
	•	Candidates – try to become leader
At any time:
	•	There is at most one leader
	•	All writes go through leader

6. How Raft Works (Step by Step)
Step 1: Leader Election
	•	Nodes start as followers
	•	If no heartbeat received → become candidate
	•	Candidate requests votes
	•	Majority wins
	•	Winner becomes leader
This prevents split-brain.

Step 2: Log Replication
	•	Client sends request to leader
	•	Leader appends entry to log
	•	Leader sends entry to followers
	•	Once majority acknowledges → commit
	•	Followers apply the change
This ensures consistency.

Step 3: Safety Guarantees
Raft ensures:
	•	No two leaders commit different values
	•	Logs remain consistent
	•	Only committed entries are applied

7. Paxos vs Raft (Practical Comparison)
Aspect
Paxos
Raft
Ease of understanding
Very hard
Easy
Implementation
Complex
Straightforward
Debugging
Difficult
Easier
Leader concept
Implicit
Explicit
Industry usage
Rare
Very common
Used in
Spanner
etcd, Consul, Kubernetes

8. Think Like a System Owner
Failure Scenario 1: Leader Crashes
Raft behavior:
	•	Followers detect missing heartbeat
	•	New election begins
	•	New leader chosen
	•	System continues
No data loss if quorum exists.

Failure Scenario 2: Network Partition
Case 1: Majority side
	•	Elects leader
	•	Continues operating
Case 2: Minority side
	•	Cannot elect leader
	•	Becomes read-only or unavailable
This prevents split-brain.

Failure Scenario 3: Slow Node
	•	Node falls behind
	•	Leader continues
	•	Node catches up later
System remains available.

Cost & Performance Implications
	•	Requires odd number of nodes (3, 5, 7)
	•	Writes require majority
	•	Latency increases with distance
	•	Strong consistency reduces throughput

9. Real World Applications
Kubernetes (etcd)
	•	Uses Raft
	•	Stores cluster state
	•	Leader manages writes
	•	Critical for cluster health

Consul
	•	Uses Raft
	•	Service discovery
	•	Distributed locks
	•	Configuration store

etcd
	•	Used by Kubernetes
	•	Strong consistency
	•	Leader-based replication

Google Spanner
	•	Uses Paxos internally
	•	Strong global consistency
	•	Very high complexity

10. Cloud Mapping
AWS
	•	DynamoDB (internal consensus)
	•	ECS scheduler
	•	EKS (etcd + Raft)
Azure
	•	Cosmos DB (consensus-based)
	•	Service Fabric
GCP
	•	Spanner (Paxos)
	•	Kubernetes (Raft via etcd)

11. Interview Perspective
How to Explain Consensus Simply
Say:
“Consensus ensures that multiple nodes agree on the same state even in the presence of failures. Raft is a practical consensus algorithm that uses a leader-based approach to make this easier and safer.”
Then explain:
	•	Why leader election is needed
	•	How quorum works
	•	What happens during failures

What Interviewers Look For
	•	Understanding of leader election
	•	Awareness of split-brain
	•	Knowledge of Raft vs Paxos
	•	Practical reasoning
	•	Failure-oriented thinking

Common Mistakes
	•	Thinking consensus = replication
	•	Ignoring quorum requirements
	•	Assuming leader never fails
	•	Using even number of nodes
	•	Confusing availability with consistency

Final Takeaway
Consensus is the foundation of distributed correctness.
Raft makes consensus practical. Paxos proves it is possible.
Great architects:
	•	Understand quorum
	•	Design for failure
	•	Accept tradeoffs
	•	Choose simplicity over theory
